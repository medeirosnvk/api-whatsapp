<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <title>Conexão WebSocket</title>
    <script>
      // Quando o documento estiver carregado, este código será executado
      document.addEventListener("DOMContentLoaded", function () {
        // Criação de uma nova conexão WebSocket
        var socket = new WebSocket("ws://191.101.70.186");

        // Função chamada quando a conexão é aberta
        socket.onopen = function () {
          console.log("Conexão WebSocket aberta!");
          // Envia uma mensagem para o servidor
          socket.send("Olá, servidor!");
        };

        // Função chamada quando uma mensagem é recebida do servidor
        socket.onmessage = function (event) {
          console.log("Mensagem recebida: " + event.data);
          // Exibe a mensagem recebida na página
          document.getElementById("messages").textContent += event.data + "\\n";
        };

        // Função chamada quando a conexão é fechada
        socket.onclose = function () {
          console.log("Conexão WebSocket fechada!");
        };

        // Função chamada em caso de erro
        socket.onerror = function (error) {
          console.log("Erro na WebSocket: " + error);
        };

        // Adiciona um evento de click ao botão para enviar mensagens
        document
          .getElementById("sendBtn")
          .addEventListener("click", function () {
            var message = document.getElementById("messageInput").value;
            socket.send(message);
            document.getElementById("messageInput").value = ""; // Limpa o campo de texto
          });
      });
    </script>
  </head>
  <body>
    <h1>WebSocket Test</h1>
    <p>Messages:</p>
    <pre id="messages"></pre>
    <input type="text" id="messageInput" />
    <button id="sendBtn">Send Message</button>
  </body>
</html>
